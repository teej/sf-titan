CREATE FUNCTION titan_state()
    RETURNS OBJECT
    LANGUAGE SQL
    IMMUTABLE
AS $$
SELECT OBJECT_CONSTRUCT()
$$
;

CREATE FUNCTION titan_packages()
    RETURNS ARRAY
    LANGUAGE SQL
AS
$$
SELECT titan_state():packages::ARRAY
$$
;